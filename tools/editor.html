<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8"/>
<title>代码编辑器</title>
<meta name="Description" content="这里填写本网页的摘要内容" />
<meta name="Keywords" content="seo关键词" />
<style>
html,body{margin:0;padding: 0;display: block;height: 100%;}
h2{font-size:18px;border-bottom:1px solid #ccc;padding:10px 0;}
a{color:#090;text-decoration:underline;margin:0 3px;}
p{font-size:14px;line-height:1.75;text-indent:2em;}
.sidebar{width: 50px;background: #09b1b9;}
.main{display: -webkit-box;
    -webkit-box-orient: horizontal;height: 100%;}
.frame{display: block;margin:0;border:none;-webkit-box-flex:1;}
.paratable{border-collapse:collapse;border:1px solid #eee;color:#333;font-size:12px;margin-bottom:15px;}
.paratable th,.paratable td{border-color:#eee;}
.paratable .s2{display:none;}
.ace_editor{border-right:1px solid #999;margin:0;-webkit-box-flex:1;width: 50%;}
.btn-runner{
display:inline-block;width:100px;height:30px;line-height:30px;text-align:center;border-radius:3px;text-decoration:none;
color:#fff;border:1px solid #81BA2F;clear:both;
background-image: -ms-linear-gradient(top, #C5E59D 0%, #90C14C 100%);
background-image: -moz-linear-gradient(top, #C5E59D 0%, #90C14C 100%);
background-image: -o-linear-gradient(top, #C5E59D 0%, #90C14C 100%);
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #C5E59D), color-stop(1, #90C14C));
background-image: -webkit-linear-gradient(top, #C5E59D 0%, #90C14C 100%);
background-image: linear-gradient(to bottom, #C5E59D 0%, #90C14C 100%);
}
.ctrls{clear:both;margin-left:-10px;display: none;}
.footer{margin:20px auto;font-size:12px;}
</style>
</head>
<body>
<div class="main">
	<div class="sidebar"></div>
	<pre id="editor1" class="editor">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;meta charset="UTF-8"/&gt;
	&lt;title&gt;网页标题&lt;/title&gt;
	&lt;meta name="Keywords" content="" /&gt;
	&lt;meta name="Description" content="" /&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
	<iframe id="frame" name="frame" class="frame" frameborder="0" width="50%" height="100%"></iframe>
</div>

<div class="ctrls">
	<a href="javascript:;" id="runner1" class="btn-runner">运行</a>
</div>
<script src="//ajaxorg.github.io/ace/build/src-min-noconflict/ace.js"></script>
<script src="//ajaxorg.github.io/ace/build/src-min-noconflict/ext-static_highlight.js"></script>
<script>
	(function(){
	    var editor = ace.edit("editor1"),
            timer = 0,
	    	run = function(editor){
				var  winname = document.getElementById('frame').contentWindow;
				 winname.document.open('text/html', 'replace');
				 winname.document.write(editor.getValue());
				 winname.document.close();
                 localStorage.setItem('editorValue',editor.getValue());
	    	},
	    	ext = "html",
	    	theme = {"js":"javascript","php":"php","html":"html"}[ext] || ext;
		    //editor.setTheme("ace/theme/monokai");
		    editor.setTheme("ace/theme/chrome");
		    editor.getSession().setMode("ace/mode/"+theme);
			editor.on('change', function(){
				clearTimeout(timer);
                timer = setTimeout(function(){
                    run(editor);
                },1000);
			});
		    if (window.localStorage){
		    	if (localStorage.getItem('editorValue')){
		    		editor.setValue(localStorage.getItem('editorValue'));
		    	}
	    	}
	})();
</script>
</body>
</html>
